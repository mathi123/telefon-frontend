<div class="page">
  <mat-card class="mat-primary mat-toolbar">
      <mat-card-title>Exercise details 
        <span fxFlex>&nbsp;</span>
        <button mat-icon-button (click)="back()">
          <mat-icon>close</mat-icon>
        </button></mat-card-title>
  </mat-card>
  <mat-tab-group>
      <mat-tab label="Details">
        <form [formGroup]="exerciseForm" #form>
          <mat-card>
            <mat-card-content fxLayout="column">
              <mat-form-field>
                <input matInput placeholder="Title" [(ngModel)]="exercise.title" 
                  required formControlName="title" autocomplete="off">
                <mat-error *ngIf="exerciseForm.controls['title'].hasError('required')">Title is required.</mat-error>
              </mat-form-field>
              <mat-form-field>
                <input matInput placeholder="Description" [(ngModel)]="exercise.description" 
                  required formControlName="description" autocomplete="off">
                <mat-error *ngIf="exerciseForm.controls['description'].hasError('required')">Description is required.</mat-error>
              </mat-form-field>
              <mat-error *ngIf="unexpectedError">An unexpected error occured.</mat-error>
            </mat-card-content>
            <mat-card-actions>
              <button mat-button color="primary" type="submit"
                (click)="save(form)"
                [disabled]="!exerciseForm.valid || !exerciseForm.dirty">
                <mat-icon>save</mat-icon>
                Save
              </button>
              <button mat-button color="warn" *ngIf="exercise._id !== undefined"
                type="button" (click)="delete()" >
                <mat-icon>delete</mat-icon>
                Delete
              </button>
            </mat-card-actions>
          </mat-card>
        </form>
    </mat-tab>
    <mat-tab label="Pages" *ngIf="exercise._id !== undefined">
      <app-task-overview [exerciseId]="exercise._id"></app-task-overview>
    </mat-tab>
  </mat-tab-group>
</div>
